# Story 5.1: Content Infrastructure Foundation

## Status

Draft

## Story

**As a** developer working on the SCISS content architecture modernization,
**I want** to establish JSON content structure and TypeScript interfaces for type-safe content management,
**so that** I have a robust foundation for migrating all content types (courses, activities, trips, staff) from JavaScript constants to individual dynamic pages with proper data validation and maintainability.

## Acceptance Criteria

1. **Content Directory Structure**: Create `/content` directory structure with subdirectories for courses, activities, trips, and staff
2. **TypeScript Interfaces**: Define TypeScript interfaces for each content type matching existing data structure patterns
3. **JSON Schema Validation**: Implement Zod schema validation for content integrity and type safety
4. **Content Conversion Utilities**: Create utilities to transform existing JS constants to JSON format
5. **Slug Generation**: Establish slug generation utilities for kebab-case URL formatting
6. **Validation Integration**: Ensure new content structure integrates with existing TypeScript strict configuration

## Tasks / Subtasks

- [ ] **Task 1: Content Directory Architecture Setup** (AC: 1)

  - [ ] Create `/content` directory in project root with subdirectories for each content type
  - [ ] Set up content directory structure following existing src/ organization patterns
  - [ ] Create index files for content type organization and exports
  - [ ] Test content directory accessibility from Next.js build process
  - [ ] Document content directory structure and naming conventions

- [ ] **Task 2: TypeScript Interface Definition** (AC: 2, 6)

  - [ ] Analyze existing content patterns in `src/constants/*.js` files
  - [ ] Create TypeScript interfaces for Course content type matching `academicsContent.js`
  - [ ] Create TypeScript interfaces for Activity content type matching `lifeActivitiesContent.js`
  - [ ] Create TypeScript interfaces for Trip content type matching `dayTripsContent.js`
  - [ ] Create TypeScript interfaces for Staff content type (new structure)
  - [ ] Export all interfaces from central types file for reuse across project

- [ ] **Task 3: Zod Schema Validation Implementation** (AC: 3, 6)

  - [ ] Create Zod schemas for each content type following existing `applicationFormSchema.js` patterns
  - [ ] Implement content validation utilities using Zod for JSON integrity checking
  - [ ] Create content validation functions that integrate with TypeScript interfaces
  - [ ] Add content validation to build process to catch errors early
  - [ ] Test schema validation with sample content data

- [ ] **Task 4: Content Conversion Utilities** (AC: 4)

  - [ ] Create utility functions to parse existing JavaScript constants files
  - [ ] Implement JSON conversion utilities for each content type
  - [ ] Create migration scripts to convert `academicsContent.js` to individual course JSON files
  - [ ] Create migration scripts for activities and trips content
  - [ ] Build content integrity verification tools to ensure no data loss during conversion

- [ ] **Task 5: Slug Generation and URL Management** (AC: 5)

  - [ ] Implement slug generation utilities for kebab-case URL formatting
  - [ ] Create URL pattern validation for consistency (courses/[slug], activities/[slug], etc.)
  - [ ] Build slug uniqueness validation to prevent URL conflicts
  - [ ] Create slug generation from content titles with proper sanitization
  - [ ] Test slug generation with existing content titles and edge cases

- [ ] **Task 6: Integration Testing and Validation** (AC: 6)
  - [ ] Test new content structure with existing Next.js build process
  - [ ] Validate TypeScript compilation with new interfaces and content types
  - [ ] Test content loading and validation in development environment
  - [ ] Create comprehensive test suite for content infrastructure
  - [ ] Document content management workflow for future content updates

## Dev Notes

### Technical Context from Architecture

**Current SCISS Tech Stack**: [Source: .cursor/docs/architect.md#actual-tech-stack]

- **Framework**: Next.js 15.3.4 with static export to `dist/` directory
- **Language**: TypeScript 5.x with extremely strict configuration
- **Validation**: Zod 3.25.71 for type-safe schema validation
- **Package Manager**: pnpm with modern Node.js >=20.0.0
- **Build Process**: Babel + TypeScript with custom configuration

**Current Content Management Architecture**: [Source: .cursor/docs/architect.md#content-management-strategy]

```text
src/constants/
├── homeContent.js       # Home page content & testimonials
├── academicsContent.js  # Course descriptions & faculty
├── aboutUsContent.js    # Mission, values, founder info
├── images.js           # Image path management
├── CampScheduleData.js # Complex schedule data
└── [others...]         # Page-specific content
```

**Content Patterns Used**: [Source: .cursor/docs/architect.md#content-patterns]

- Structured JavaScript objects with metadata
- Image references with alt text attributes
- Complex data structures (course info, schedule mappings)
- TypeScript validation through existing strict configuration

**Project Structure Integration**: [Source: .cursor/docs/architect.md#source-tree]

- **Data Location**: `src/data/` contains JSON files (addressOptions.json, formOptions.json)
- **Schema Location**: `src/lib/schemas/` contains validation schemas (applicationFormSchema.js)
- **Component Integration**: Content consumed by components in `src/components/sections/`

### Existing Zod Validation Patterns

**Application Form Schema Reference**: [Source: .cursor/docs/architect.md#data-models]

The project already uses comprehensive Zod validation with 160+ lines of complex validation rules for the application form, including:

- String validation with email and phone number patterns
- Enum validation for structured data (grades, courses, sports)
- Conditional validation logic (financial aid → transcript upload)
- File validation with type and size restrictions

**Integration Strategy**: New content schemas should follow existing patterns in `src/lib/schemas/applicationFormSchema.js`

### Content Type Analysis

**Academic Content Structure** (from academicsContent.js analysis):

- Course objects with title, description, level, duration
- Faculty information with photos and credentials
- Program metadata with prerequisites and outcomes
- Schedule information with complex time mappings

**Activities Content Structure** (from lifeActivitiesContent.js analysis):

- Sports programs with levels and features
- Fitness programs with highlights and schedules
- Recreational activities with categorization
- Program descriptions with requirements

**Trips Content Structure** (from dayTripsContent.js analysis):

- University visits with locations and highlights
- Cultural trips with activities and inclusions
- Travel information with safety and preparation details
- Destination metadata with duration and type classification

### File Location Strategy

**New Content Directory Structure**:

```text
content/
├── courses/
│   ├── path-to-wall-street.json
│   ├── ai-and-machine-learning.json
│   └── index.ts                    # Course type exports
├── activities/
│   ├── basketball.json
│   ├── swimming.json
│   └── index.ts                    # Activity type exports
├── trips/
│   ├── harvard-visit.json
│   ├── mit-tour.json
│   └── index.ts                    # Trip type exports
├── staff/
│   ├── john-doe.json
│   └── index.ts                    # Staff type exports
└── types.ts                        # Central TypeScript interfaces
```

**TypeScript Interface Location**: `content/types.ts` to follow existing `src/lib/schemas/` pattern

**Zod Schema Location**: `src/lib/schemas/contentSchemas.ts` to integrate with existing validation architecture

### Integration with Existing Build System

**Static Export Compatibility**: [Source: .cursor/docs/architect.md#deployment]

- New content structure must work with `next build && next export` process
- JSON files must be accessible during static generation
- Content validation should integrate with existing build process

**TypeScript Integration**: [Source: .cursor/docs/architect.md#tech-stack]

- Must work with existing extremely strict TypeScript configuration
- Content interfaces should integrate with existing component prop types
- Validation should occur at build time to catch content errors

### Slug Generation Requirements

**URL Pattern Strategy**:

- `/courses/[slug]` - Individual course pages
- `/activities/[slug]` - Individual activity pages
- `/trips/[slug]` - Individual trip pages
- `/staff/[slug]` - Individual staff profile pages

**Slug Format**: kebab-case (e.g., "path-to-wall-street", "ai-and-machine-learning")

**Slug Generation Logic**: Convert titles to URL-safe strings, handle special characters, ensure uniqueness

## Change Log

| Date       | Version | Description                                       | Author           |
| ---------- | ------- | ------------------------------------------------- | ---------------- |
| 2024-12-19 | 1.0     | Initial story creation for content infrastructure | Scrum Master Bob |

## Dev Agent Record

_This section will be populated by the development agent during implementation_

## QA Results

_This section will be populated by the QA agent after implementation review_
